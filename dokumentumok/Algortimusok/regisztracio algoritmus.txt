ALGORITMUS: Regisztracio

TÍPUS: User
    Egész: id
    Szöveg: username
    Szöveg: email
TÍPUS VÉGE

VÁLTOZÓK:
    User: ujFelhasznalo
    Szöveg: email := ""
    Szöveg: username := ""
    Szöveg: password := ""
    Szöveg: confirmPW := ""

    Adat: talalat
    Logikai: userOK := HAMIS


CIKLUS amíg (IGAZ)

        //Adatok bekérése és alap ellenőrzések
        CIKLUS amíg NEM(
            email = ÜRES VAGY 
            username = ÜRES VAGY
            password = ÜRES VAGY
            confirmPW = ÜRES VAGY
            username.hosszúság > 100 VAGY
            password.hosszúság > 100
        )

                BE: email
                BE: username
                BE: password
                BE: confirmPW

                HA email = ÜRES VAGY username = ÜRES VAGY password = ÜRES VAGY confirmPW = ÜRES:
                        KIÍR "Kérjük, töltsön ki minden mezőt!"

                HA username.hosszúság > 100 VAGY password.hosszúság > 100:
                        KIÍR "A felhasználónév vagy a jelszó túl hosszú!"

                HA NEM(email megfelel email_formátumnak):
                        KIÍR "Érvénytelen email cím!"

                HA password <> confirmPW:
                        KIÍR "A jelszavak nem egyeznek!"

        CIKLUS VÉGE


        //Felhasználónév foglaltság ellenőrzése
        talalat := LEKERDEZ(
            "SELECT id FROM user WHERE username = username"
        )

        HA talalat ≠ ÜRES:
                KIÍR "Ez a felhasználónév már létezik!"
                FOLYTAT
        

        //Új felhasználó összeállítása
        ujFelhasznalo.username := username
        ujFelhasznalo.email := email

        //Felhasználó beszúrása az adatbázisba
        BESZÚR(
            "INSERT INTO user (email, username, password, created_at)
             VALUES (email, username, password, MOST())"
        )

        userOK := IGAZ
        MEGSZAKÍT

CIKLUS VÉGE
ALGORITMUS VÉGE
